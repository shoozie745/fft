@page "/"
@using System.ComponentModel.DataAnnotations


<PageTitle>Index</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Hello, world!</MudText>
<MudText Class="mb-8">Welcome to your new app, powered by MudBlazor!</MudText>
<MudAlert Severity="Severity.Normal">
</MudAlert>
<MudGrid>
    <MudItem md="12" sm="12" xs="12">
        <MudPaper Class="pa-4">
            <EditForm Model="@model" OnValidSubmit="OnValidSubmit" >
                <MudGrid>
                    <MudItem md="4" sm="6" xs="6">
                        <MudTextField @bind-Value="model.SequenceLenght" For="@(() => model.SequenceLenght)" Immediate="true" Label="кол-во элементов"/>
                    </MudItem>
                    <MudItem md="4" sm="6" xs="6">
                        <MudSlider @bind-Value="model.ZeroingSliderValue" Min="0" Max="100" Color="Color.Primary" Step="1" OnInput="@OnSliderInput">Процент отбрасывания: @model.ZeroingSliderValue.ToString() %</MudSlider>
                    </MudItem>
                    
                    <MudItem md="4" sm="6" xs="6">
                        <MudCheckBox @bind-Checked="model.IsRealFunction" For="@(() => model.IsRealFunction)" Label="Toggle Text Input" Color="Color.Primary"/>
                    </MudItem>
                    @{
                        if (model.IsRealFunction)
                        {
                            <MudItem md="4" sm="6" xs="6">
                                <MudTextField Label="Действительная функция" @bind-Value="model.Expression" For="@(() => model.Expression)" Placeholder="Enter text" RequiredError="Поле не должно быть пустым"/>
                            </MudItem>
                            <MudItem md="4" sm="6" xs="6">
                                <MudTextField Label="Начало интервала" @bind-Value="model.MinValueOnReal" For="@(() => model.MinValueOnReal)" Placeholder="Enter text" RequiredError="Поле не должно быть пустым"/>
                            </MudItem>
                            <MudItem md="4" sm="6" xs="6">
                                <MudTextField Label="Шаг сетки" @bind-Value="model.GridStep" For="@(() => model.GridStep)" Placeholder="Используйте Expression" RequiredError="Поле не должно быть пустым"/>
                            </MudItem>
                        }
                    }

                    <MudCardActions>
                        <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Register</MudButton>
                    </MudCardActions>
                </MudGrid>
            </EditForm>
        </MudPaper>
    </MudItem>
</MudGrid>


@if (showComplexPlotComponent)
{
    <Graph Model="@_graphModel"/>
}

@if (showRealPlotComponent)
{
    <RealGraph Model="@_realGraphModel"/>
}

@if (_isExceptionShowing)
{
    <ExceptionPaper ExceptionMessage="@_exceptionMessage"/>
}
